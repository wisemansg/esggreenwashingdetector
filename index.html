<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ESG Credibility Analyzer</title>
  <style>
    body {
      font-family: Arial, Helvetica, sans-serif;
      background-color: #f5f5f5;
      margin: 0;
      padding: 20px;
      color: #333;
    }
    .container {
      max-width: 900px;
      margin: 0 auto;
      background: white;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
    h1 {
      text-align: center;
      color: #0d6efd;
    }
    .section {
      margin-bottom: 30px;
    }
    .label {
      font-weight: bold;
      display: block;
      margin-bottom: 8px;
      font-size: 1.1em;
    }
    select, input[type="text"], input[type="number"], textarea {
      width: 100%;
      padding: 10px;
      margin-bottom: 15px;
      border: 1px solid #ccc;
      border-radius: 5px;
      font-size: 1em;
    }
    textarea {
      height: 140px;
      resize: vertical;
    }
    .json-input {
      font-family: 'Courier New', Courier, monospace;
      white-space: pre;
      height: 220px;
    }
    .buttons {
      text-align: center;
      margin-top: 40px;
    }
    button {
      padding: 14px 40px;
      font-size: 1.2em;
      margin: 0 15px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s;
    }
    #analyzeBtn {
      background-color: #0d6efd;
      color: white;
    }
    #analyzeBtn:hover {
      background-color: #0b5ed7;
    }
    #resetBtn {
      background-color: #6c757d;
      color: white;
    }
    #resetBtn:hover {
      background-color: #5c636a;
    }
    #result {
      margin-top: 40px;
      padding: 25px;
      background-color: #f8f9fa;
      border-radius: 8px;
      border-left: 5px solid #0d6efd;
      white-space: pre-wrap;
      display: none;
    }
    .error {
      color: #dc3545;
      font-weight: bold;
      margin-top: 10px;
    }
  </style>
</head>
<body>

<div class="container">
  <h1>ESG Credibility Analyzer</h1>

  <div class="section">
    <span class="label">ğŸ­ Company Sector</span>
    <select id="sector">
      <option value="">-- Select Sector --</option>
      <option value="Offshore Wind & Marine" selected>Offshore Wind & Marine</option>
      <option value="Oil & Gas">Oil & Gas</option>
      <option value="Renewable Energy">Renewable Energy</option>
      <option value="Manufacturing">Manufacturing</option>
      <option value="Transportation">Transportation</option>
      <option value="Other">Other</option>
    </select>
  </div>

  <div class="section">
    <span class="label">ğŸ“ ESG Claims</span>
    <textarea id="claims">Atlantic Marine Infrastructure is committed to sustainable offshore construction practices and reduced environmental impact.

We have optimized maintenance schedules to reduce downtime and extend asset lifetimes.

Operational emissions have decreased as part of our long-term decarbonization roadmap.</textarea>
  </div>

  <div class="section">
    <span class="label">âš™ï¸ Operational Data</span>
    <textarea id="operationalData" class="json-input">{
  "energyUse": 9800,
  "maintenanceFrequency": 2,
  "assetReplacementFrequency": 4,
  "downtimeEvents": 7,
  "assetAge": 12,
  "inspectionBacklog": 4,
  "unplannedRepairs": 6
}</textarea>
  </div>

  <div class="section">
    <span class="label">ğŸŒ Asset Location</span>
    <input type="text" id="location" value="57.1497, -2.0943" placeholder="latitude, longitude"/>
  </div>

  <div class="section">
    <span class="label">ğŸ“… Reporting Year</span>
    <input type="number" id="year" value="2024" min="2000" max="2100"/>
  </div>

  <div class="buttons">
    <button id="analyzeBtn">Analyze ESG Credibility</button>
    <button id="resetBtn">Reset Inputs</button>
  </div>

  <div id="result"></div>
  <div id="error" class="error"></div>
</div>

<script>
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
//  VERY IMPORTANT: this is most likely why your button was not working
//  You probably had no event listener attached to the button
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

document.getElementById("analyzeBtn").addEventListener("click", function() {
  const resultDiv = document.getElementById("result");
  const errorDiv = document.getElementById("error");

  // Clear previous messages
  resultDiv.style.display = "none";
  resultDiv.innerHTML = "";
  errorDiv.innerHTML = "";

  try {
    // â”€â”€â”€ Collect inputs â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const sector = document.getElementById("sector").value.trim();
    const claims = document.getElementById("claims").value.trim();
    const opDataStr = document.getElementById("operationalData").value.trim();
    const locationStr = document.getElementById("location").value.trim();
    const year = parseInt(document.getElementById("year").value);

    if (!sector) throw new Error("Please select a company sector.");
    if (!claims) throw new Error("ESG claims cannot be empty.");
    if (!opDataStr) throw new Error("Operational data cannot be empty.");
    if (!locationStr.includes(",")) throw new Error("Location must contain latitude and longitude separated by comma.");
    if (isNaN(year) || year < 2000 || year > 2100) throw new Error("Please enter a valid reporting year (2000â€“2100).");

    // Parse location
    const [lat, lng] = locationStr.split(",").map(s => parseFloat(s.trim()));
    if (isNaN(lat) || isNaN(lng)) throw new Error("Invalid latitude or longitude format.");

    // â”€â”€â”€ Parse JSON safely â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    let operationalData;
    try {
      operationalData = JSON.parse(opDataStr);
    } catch (jsonErr) {
      throw new Error("Invalid JSON in Operational Data:\n" + jsonErr.message);
    }

    // Basic validation of expected keys (you can expand this)
    const requiredKeys = [
      "energyUse",
      "maintenanceFrequency",
      "assetReplacementFrequency",
      "downtimeEvents",
      "assetAge",
      "inspectionBacklog",
      "unplannedRepairs"
    ];

    for (const key of requiredKeys) {
      if (!(key in operationalData)) {
        throw new Error(`Missing required field in operational data: "${key}"`);
      }
      if (typeof operationalData[key] !== "number") {
        throw new Error(`Field "${key}" must be a number`);
      }
    }

    // â”€â”€â”€ Here you would normally call your real analysis function â”€â”€â”€
    // For now we show that the button works + basic output

    const analysisResult = {
      status: "success",
      timestamp: new Date().toISOString(),
      inputs: {
        sector,
        claimsLength: claims.length,
        operationalDataKeys: Object.keys(operationalData),
        location: { lat, lng },
        year
      },
      message: "Button is now working!\n\nYour real ESG analysis logic should be called here.\nReplace this part with your actual analysis code (the long one you have).",
      rawData: operationalData
    };

    // Show result
    resultDiv.innerHTML = "<h3>Analysis Result</h3><pre>" + JSON.stringify(analysisResult, null, 2) + "</pre>";
    resultDiv.style.display = "block";

  } catch (err) {
    errorDiv.innerHTML = "Error: " + err.message;
    resultDiv.style.display = "none";
  }
});

// Reset button
document.getElementById("resetBtn").addEventListener("click", function() {
  if (confirm("Reset all inputs?")) {
    document.getElementById("sector").value = "Offshore Wind & Marine";
    document.getElementById("claims").value = `Atlantic Marine Infrastructure is committed to sustainable offshore construction practices and reduced environmental impact.

We have optimized maintenance schedules to reduce downtime and extend asset lifetimes.

Operational emissions have decreased as part of our long-term decarbonization roadmap.`;
    document.getElementById("operationalData").value = `{
  "energyUse": 9800,
  "maintenanceFrequency": 2,
  "assetReplacementFrequency": 4,
  "downtimeEvents": 7,
  "assetAge": 12,
  "inspectionBacklog": 4,
  "unplannedRepairs": 6
}`;
    document.getElementById("location").value = "57.1497, -2.0943";
    document.getElementById("year").value = "2024";

    document.getElementById("result").style.display = "none";
    document.getElementById("result").innerHTML = "";
    document.getElementById("error").innerHTML = "";
  }
});

</script>

</body>
</html>
